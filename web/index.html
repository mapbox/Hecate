<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset=utf-8 />
        <meta name='viewport' content='width=device-width, initial-scale=1'>

        <title>Hecate UI | Mapbox</title>

        <link rel='stylesheet' href='./main.css' />
        <link href="https://api.mapbox.com/mapbox-assembly/v0.19.0/assembly.min.css" rel="stylesheet">
        <script async defer src="https://api.mapbox.com/mapbox-assembly/v0.19.0/assembly.js"></script>
        <script async defer src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/5.1.5/turf.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
        <script src='https://unpkg.com/vue'></script>
        <script src="https://unpkg.com/vue-multiselect@2.0.3"></script>
        <script src="https://unpkg.com/vue-clipboard2@0.0.8/dist/vue-clipboard.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/vue-multiselect@2.0.3/dist/vue-multiselect.min.css">
        <link href='https://fonts.googleapis.com/css?family=Noto+Sans' rel='stylesheet' type='text/css'>
        <script src='https://api.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.css' rel='stylesheet' />
        <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.min.js'></script>
        <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.css' type='text/css' />
        <script src='./main.js'></script>
    </head>
    <body>
        <div id="app" class="relative">
            <div class='viewport-full relative scroll-hidden'>
                <div id="map" class='bg-darken10 viewport-twothirds viewport-full-ml absolute top left right bottom'></div>
                <div class='absolute top-ml left bottom z1 w-full w240-ml hmax-full px12 py12-ml' style="pointer-events: none;">
                    <div v-if="feature" class='flex-parent flex-parent--column viewport-third h-auto-ml hmax-full bg-white round-ml shadow-darken10' style="pointer-events:auto;">
                        <div class="flex-child px12 py12">
                            <h3 class='fl py6 txt-m txt-bold'>Hecate Deltas</h3>
                            <button @click="login" class='fr px12 py12 btn round bg-white bg-darken25-on-hover color-gray-dark fr'><svg class='icon'><use xlink:href='#icon-user'/></button>
                        </div>

                        <div class='flex-child clearfix px12 py12 bg-gray-faint round-b-ml txt-s'>
                            <button @click="feature = false" class='btn round bg-gray-light bg-darken25-on-hover color-gray-dark fl'><svg class='icon'><use xlink:href='#icon-arrow-left'/></button>
                            <div class="px12 py3 txt-bold fl">Feature <span v-text="feature.id"></span></div>
                        </div>

                        <div class="flex-child scroll-auto">
                            <table class='table txt-xs'>
                                <thead><tr><th>Key</th><th>Value</th></tr></thead>
                                 <tbody>
                                    <tr v-for="prop in Object.keys(feature.properties)"><td v-text="prop"></td><td v-text="feature.properties[prop]"></td></tr>
                                </tbody>
                            </table>
                        </div>

                        <div class='flex-child px12 py12 bg-gray-faint round-b-ml txt-s flex-child'>
                            <div align='center'><a href="https://github.com/ingalls/hecate">Powered By Hecate Server</a></div>
                        </div>
                    </div>
                    <div v-else-if="delta" class='flex-parent flex-parent--column viewport-third h-auto-ml hmax-full bg-white round-ml shadow-darken10' style="pointer-events:auto;">
                        <div class="flex-child px12 py12">
                            <h3 class='fl py6 txt-m txt-bold'>Hecate Deltas</h3>
                            <button @click="login" class='fr px12 py12 btn round bg-white bg-darken25-on-hover color-gray-dark fr'><svg class='icon'><use xlink:href='#icon-user'/></button>
                        </div>

                        <div class='flex-child clearfix px12 py12 bg-gray-faint round-b-ml txt-s'>
                            <button @click="delta = false" class='btn round bg-gray-light bg-darken25-on-hover color-gray-dark fl'><svg class='icon'><use xlink:href='#icon-arrow-left'/></button>
                            <div class="px12 py3 txt-bold fl">Delta <span v-text="delta.id"></span></div>
                        </div>

                        <div class="flex-child scroll-auto">
                            <div v-for="(feat, feat_it) in delta.features.features" class="px12 py3 clearfix bg-white bg-darken25-on-hover cursor-pointer">
                                <span v-if="feat.geometry.type === 'Point'" class="fl py6 px6"><svg class='icon'><use xlink:href='#icon-marker'/></span>
                                <span v-if="feat.geometry.type === 'MultiPoint'" class="fl px6 py6"><svg class='icon'><use xlink:href='#icon-marker'/></span>
                                <span v-if="feat.geometry.type === 'LineString'" class="fl px6 py6"><svg class='icon'><use xlink:href='#icon-polyline'/></span>
                                <span v-if="feat.geometry.type === 'MultiLineString'" class="fl px6 py6"><svg class='icon'><use xlink:href='#icon-polyline'/></span>
                                <span v-if="feat.geometry.type === 'Polygon'" class="fl px6 py6"><svg class='icon'><use xlink:href='#icon-polygon'/></span>
                                <span v-if="feat.geometry.type === 'MultiPolygon'" class="fl px6 py6"><svg class='icon'><use xlink:href='#icon-polygon'/></span>

                                <span class="fl" v-text="feat.id"></span>
                                <span class="fl px6" v-text="feat.action"></span>
                            </div>
                        </div>

                        <div class='flex-child px12 py12 bg-gray-faint round-b-ml txt-s flex-child'>
                            <div align='center'><a href="https://github.com/ingalls/hecate">Powered By Hecate Server</a></div>
                        </div>
                    </div>
                    <div v-else-if="bounds" class='flex-parent flex-parent--column viewport-third h-auto-ml hmax-full bg-white round-ml shadow-darken10' style="pointer-events:auto;">
                        <div class="flex-child px12 py12">
                            <h3 class='fl py6 txt-m txt-bold'>Hecate Deltas</h3>
                            <button @click="login" class='fr px12 py12 btn round bg-white bg-darken25-on-hover color-gray-dark fr'><svg class='icon'><use xlink:href='#icon-user'/></button>
                        </div>

                        <div class='flex-child px12 py12 bg-gray-faint round-b-ml txt-s'>
                            <div class='select-container'>
                                <select v-model="panel" class='select select--s select--stroke'>
                                    <option v-bind:value="{ panel: 'deltas' }">Deltas</option>
                                    <option v-bind:value="{ panel: 'bounds' }" selected>Bounds</option>
                                </select>
                                <div class='select-arrow'></div>
                            </div>
                            <button @click="deltas_refresh" class='btn round bg-gray-light bg-darken25-on-hover color-gray-dark fr'><svg class='icon'><use xlink:href='#icon-refresh'/></button>
                        </div>

                        <div class="flex-child scroll-auto">
                            <div v-if="!bounds.length" class="px12 py3 clearfix bg-white">
                                <div align="center">No Boundaries</div>
                            </div>

                            <div v-for="(bound, bound_it) in bounds" class="w-full py3 clearfix bg-white bg-darken25-on-hover cursor-pointer">
                                <a v-bind:href="`/api/data/bounds/${bounds}`" target="_blank" class="w-full clearfix">
                                    <span class="fl py6 px6"><svg class='icon'><use xlink:href='#icon-database'/></span>
                                    <span class="fl" v-text="bound"></span>
                                </a>
                            </div>
                        </div>

                        <div class='flex-child px12 py12 bg-gray-faint round-b-ml txt-s flex-child'>
                            <div align='center'><a href="https://github.com/ingalls/hecate">Powered By Hecate Server</a></div>
                        </div>
                    </div>
                    <div v-else class='flex-parent flex-parent--column viewport-third h-auto-ml hmax-full bg-white round-ml shadow-darken10' style="pointer-events:auto;">
                        <div class="flex-child px12 py12">
                            <h3 class='fl py6 txt-m txt-bold'>Hecate Deltas</h3>
                            <button @click="login" class='fr px12 py12 btn round bg-white bg-darken25-on-hover color-gray-dark fr'><svg class='icon'><use xlink:href='#icon-user'/></button>
                        </div>

                        <div class='flex-child px12 py12 bg-gray-faint round-b-ml txt-s'>
                            <div class='select-container'>
                                <select v-model="panel" class='select select--s select--stroke'>
                                    <option v-bind:value="{ panel: 'deltas' }">Deltas</option>
                                    <option v-bind:value="{ panel: 'bounds' }" selected>Bounds</option>
                                </select>
                                <div class='select-arrow'></div>
                            </div>
                            <button @click="deltas_refresh" class='btn round bg-gray-light bg-darken25-on-hover color-gray-dark fr'><svg class='icon'><use xlink:href='#icon-refresh'/></button>
                        </div>

                        <div v-if="!deltas.length" class="px12 py3 clearfix bg-white">
                            <div align="center">No Deltas</div>
                        </div>

                        <div class="flex-child scroll-auto">
                            <div v-for="delta in deltas" @click="delta_get(delta.id)" class="px12 py12 border-b bg-darken10-on-hover border--gray-light cursor-pointer wfull">
                                <div class="clearfix">
                                    <div class="fl txt-bold" v-text="delta.username"></div>
                                    <div class="fr txt-em" v-text="moment(delta.created).fromNow()"></div>
                                </div>
                                <span v-text="delta.props.message ? delta.props.message : '<No Delta Message>'"></span>
                                <span class='bg-blue-faint color-blue inline-block px6 py3 my3 my3 txt-xs txt-bold round fr' v-text="delta.id"></span>
                            </div>
                        </div>

                        <div class='px12 py12 bg-gray-faint round-b-ml txt-s flex-child'>
                            <div align='center'><a href="https://github.com/ingalls/hecate">Powered By Hecate Server</a></div>
                        </div>
                    </div>

                </div>

                <div v-if='modal === "login"' class='absolute top left bottom right z2 bg-black' style="pointer-events: none;">
                    <div class='flex-parent flex-parent--center-main flex-parent--center-cross h-full' style="pointer-events:auto;">
                        <div class="flex-child px12 py12 w600 h300 bg-white round-ml shadow-darken10">
                            <div class='grid w-full'>
                                <div class='col col--8'>
                                    <h3 class='fl py6 txt-m txt-bold w-full'>Hecate Login</h3>
                                </div>
                                <div class='col col--4'>
                                    <button @click='modal = false'class='fr btn round bg-white color-black bg-darken25-on-hover'><svg class='icon'><use xlink:href='#icon-close'/></svg></button>
                                </div>

                                <div class='col col--12 py12'>
                                    <label>
                                        Username:
                                        <input class='input py12' placeholder='username'/>
                                    </label>
                                </div>

                                <div class='col col--12 py12'>
                                    <label>
                                        Password:
                                        <input type='password' class='input py12' placeholder='password'/>
                                    </label>
                                </div>

                                <div class='col col--12'>
                                    <div class='grid grid--gut12'>
                                        <div class='col col--6 py12'>
                                            <button class='btn round bg-gray w-full'>Register</button>
                                        </div>

                                        <div class='col col--6 py12'>
                                            <button class='btn round w-full'>Login</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
